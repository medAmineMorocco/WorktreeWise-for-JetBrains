plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.16.0'
}

group = 'com.worktreewise'
version = '1.0.3'

repositories {
    mavenCentral()
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

intellij {
    version = '2022.2.5'
    type = 'IC'
    plugins = [] // do NOT auto-load extra plugins
}

tasks.withType(org.jetbrains.intellij.tasks.PatchPluginXmlTask) {
    sinceBuild.set("222")
    untilBuild.set("252.*")
}

tasks.named("runPluginVerifier", org.jetbrains.intellij.tasks.RunPluginVerifierTask) {
    ideVersions.set(["2022.3", "2023.2", "2024.2", "2025.1"]) // IDE versions to test
}

dependencies {
    implementation("org.json:json:20240303")
}

runIde {
    jvmArgs += [
            "-Didea.disable.package.search=true",
            "-Dide.browser.jcef.headless.enabled=false"
    ]
}
